<div class="videoMain">
  <div class="wraperVideo">
    <div class="video-container">
      <video
        id="videoPlayer"
        src="{{ section.settings.video.sources[1].url }}"
        muted
        controls></video>
      <div class="coverImg-container">
        <img
          id="coverImg"
          src="{{ section.settings.coverImg | image_url: width: 1920 }}"
          alt="Cover Image"
          loading="lazy" />
      </div>
      <button id="videoButton"><img
          src="https://cdn.shopify.com/s/files/1/0832/5244/5464/files/Button_Play.svg?v=1696357293"
          alt="PlayButton"
          class="imgHover"></button>
    </div>
  </div>
</div>

<style>
  .videoMain {
    display: grid;
    justify-items: center;
  }
  .wraperVideo {
    width: 90vw;
  }
  .video-container {
    position: relative;
    width: 100%;
    padding-top: 56.25%;
    cursor: pointer;
  }
  .video-container button {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    border: none;
    background-color: #5f9ea000;
  }
  .video-container button:hover {
    filter:brightness(0.95);
  }
  .coverImg-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(0deg, rgba(0, 9, 91, 0.80) 0%, rgba(0, 9, 91, 0.80) 100%), linear-gradient(0deg, #000 0%, #000 100%);
    background-image: url('{{ section.settings.coverImg | image_url: width: 1920 }}');
    background-color: lightgray;
    background-position: 50%;
    background-size: cover;
    background-repeat: no-repeat;
  }
  video,
  #coverImg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 12px;
  }
  #coverImg {
    object-fit: cover;
    opacity: 0;

  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const coverImg = document.getElementById("coverImg");
    const videoPlayer = document.getElementById("videoPlayer");
    const videoButton = document.getElementById("videoButton")
    coverImg.addEventListener("click", function() {
      coverImg.style.display = "none";
      videoButton.style.display = "none"
      videoPlayer.play();
    });
    videoButton.addEventListener("click", function() {
      coverImg.style.display = "none";
      videoButton.style.display = "none"
      videoPlayer.play();
    });
  });
</script>

{% schema %}
  {
    "name": "Video",
    "class": "video-section",
    "settings": [
      {
        "type": "video",
        "id": "video",
        "label": "Select your video"
      }, {
        "type": "image_picker",
        "id": "coverImg",
        "label": "Select your cover image"
      }
    ],
    "presets": [
      {
        "name": "Video"
      }
    ]
  }
{% endschema %}